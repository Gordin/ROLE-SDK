<html>
  <head>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<title>Role Space</title>
	<style type="text/css">
		@import "/dojo/resources/dojo.css";
    </style>
  </head>
  <body class="soria">
    <script type="text/javascript" src="/dojo/dojo.js.uncompressed.js"
		djConfig="isDebug: true, debugAtAllCosts: true, parseOnLoad: true, usePlainJson: true"></script>				
	<script type="text/javascript"-->

 		dojo.addOnLoad(function() {
			var base = document.location.protocol + "//" + document.location.host;
			var gadgetsJson = function(arr)  {
				var gadg = [];
				dojo.forEach(arr, function(url) {
					gadg.push({"moduleId": 0, "url": base+url});
				});
				var str = dojo.toJson(gadg);
				return dojo.toJson({gadgets: str});
			}
			var xhrArg = {
				url: base+"/social/rest/appdata/john.doe/@self",
				handleAs: "json-comment-optional",
				headers: {"accept": "application/json",
						"Content-type": "application/json"},
				load: function(data) {},
				postData: gadgetsJson([
				  '/gadgets/portfolio/gadget.xml',
				  '/gadgets/monitor/monitor-gadget.xml',
				  '/gadgets/chat/role-xmpp-chat-gadget.xml',
				  '/gadgets/dashboardPersonalHistory/phDashboard.xml',
				  '/gadgets/cam/cam.xml',
				  '/gadgets/conceptalyzer/conceptalyzer.xml',
				  '/gadgets/objectspot/objectspot.xml',
				  '/gadgets/wikipedia/wikipedia.xml'])
			};
			dojo.rawXhrPost(xhrArg);
			
			xhrArg = {
				url: base+"/social/rest/appdata/jane.doe/@self",
				handleAs: "json-comment-optional",
				headers: {"accept": "application/json",
						"Content-type": "application/json"},
				load: function(data) {},
				postData: gadgetsJson(['/gadgets/language/languageResourceBrowser/languageResourceBrowser.xml',
				 '/gadgets/rss/gadget.xml', 
				 '/gadgets/language/vocabularyTrainer/vocabularyTrainer.xml'])
			};			
			dojo.rawXhrPost(xhrArg);

			xhrArg = {
				url: base+"/social/rest/appdata/george.doe/@self",
				handleAs: "json-comment-optional",
				headers: {"accept": "application/json",
						"Content-type": "application/json"},
				load: function(data) {},
				postData: gadgetsJson(["/lib/container-dnd/HelloWorld.xml",
	                "/lib/container-dnd/HelloWorld.xml",
    	            "/lib/container-dnd/Zaffra.xml",
        	        "/lib/container-dnd/Zaffra.xml",
            	    "/lib/container-dnd/Life360.xml",
                	"/lib/container-dnd/Life360.xml"])
			};			
			dojo.rawXhrPost(xhrArg);

		});

	</script>
     <div id="roleWorkNode"></div>
  </body>
</html>